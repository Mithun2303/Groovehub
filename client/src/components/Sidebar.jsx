import axios from "axios";
import { useNavigate } from "react-router-dom";
export const Sidebar = ({ activeComponent, setActiveComponent, showHome, isLoggedIn, handleLogout, setShowJoinSpace }) => {
    const navigate = useNavigate();
    const handleClick = (e) => {
        e.preventDefault();
        axios.post("http://54.163.212.62:8121/api/auth/logout", {}, { withCredentials: true })
            .then((res) => {
                console.log(res.data);
                handleLogout();
            })
    }
    const createSpace = () => {
        axios.post("http://54.163.212.62:8121/api/user/space", {}, { withCredentials: true })
            .then((res) => {
                console.log(res.data);
                navigate(`/space/${res.data.space_id}`);
            })
    }
    return (
        <main className="h-screen py-16 float-left fixed  bg-dark w-[16.66%] shadow-lg flex flex-col items-start justify-between ">
            <div className=" flex flex-col w-fit mt-10">
                <button className="" onClick={(e) => { setActiveComponent ? setActiveComponent(0) : navigate("/"); showHome(); }}>
                    <div className={`flex gap-4  items-center text-white font-extralight ${activeComponent == 0 ? "bg-primary" : ""} hover:bg-primary w-fit py-6 pl-9 pr-16  rounded-r-[50px] `}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.5 23.75V17.5H17.5V23.75C17.5 24.4375 18.0625 25 18.75 25H22.5C23.1875 25 23.75 24.4375 23.75 23.75V15H25.875C26.45 15 26.725 14.2875 26.2875 13.9125L15.8375 4.49999C15.3625 4.07499 14.6375 4.07499 14.1625 4.49999L3.7125 13.9125C3.2875 14.2875 3.55 15 4.125 15H6.25V23.75C6.25 24.4375 6.8125 25 7.5 25H11.25C11.9375 25 12.5 24.4375 12.5 23.75Z" fill="white" />
                        </svg>
                        <span className="text-white">
                            Home
                        </span>
                    </div>
                </button>
                <button className="" onClick={(e) => {
                    if (isLoggedIn) {
                        setActiveComponent(1)
                    }
                    else {
                        alert("Please login/signup to view activity")
                    }
                }}>
                    <div className={`flex gap-4 items-center text-white font-extralight ${activeComponent == 1 ? "bg-primary" : ""} hover:bg-primary w-fit py-6 pl-9 pr-14  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.1875 2.5H12.8125C12.1207 2.50002 11.4532 2.75501 10.9376 3.21621C10.4219 3.67742 10.0944 4.31249 10.0175 5H7.8125C7.06658 5 6.35121 5.29632 5.82376 5.82376C5.29632 6.35121 5 7.06658 5 7.8125V24.6875C5 25.4334 5.29632 26.1488 5.82376 26.6762C6.35121 27.2037 7.06658 27.5 7.8125 27.5H22.1875C22.5568 27.5 22.9226 27.4273 23.2638 27.2859C23.605 27.1446 23.9151 26.9374 24.1762 26.6762C24.4374 26.4151 24.6446 26.105 24.7859 25.7638C24.9273 25.4226 25 25.0568 25 24.6875V7.8125C25 7.44316 24.9273 7.07743 24.7859 6.7362C24.6446 6.39497 24.4374 6.08493 24.1762 5.82376C23.9151 5.5626 23.605 5.35543 23.2638 5.21409C22.9226 5.07275 22.5568 5 22.1875 5H19.9825C19.9056 4.31249 19.5781 3.67742 19.0624 3.21621C18.5468 2.75501 17.8793 2.50002 17.1875 2.5ZM12.8125 4.375H17.1875C17.4361 4.375 17.6746 4.47377 17.8504 4.64959C18.0262 4.8254 18.125 5.06386 18.125 5.3125C18.125 5.56114 18.0262 5.7996 17.8504 5.97541C17.6746 6.15123 17.4361 6.25 17.1875 6.25H12.8125C12.5639 6.25 12.3254 6.15123 12.1496 5.97541C11.9738 5.7996 11.875 5.56114 11.875 5.3125C11.875 5.06386 11.9738 4.8254 12.1496 4.64959C12.3254 4.47377 12.5639 4.375 12.8125 4.375ZM15.625 12.8125C15.625 12.5639 15.7238 12.3254 15.8996 12.1496C16.0754 11.9738 16.3139 11.875 16.5625 11.875H20.9375C21.1861 11.875 21.4246 11.9738 21.6004 12.1496C21.7762 12.3254 21.875 12.5639 21.875 12.8125C21.875 13.0611 21.7762 13.2996 21.6004 13.4754C21.4246 13.6512 21.1861 13.75 20.9375 13.75H16.5625C16.3139 13.75 16.0754 13.6512 15.8996 13.4754C15.7238 13.2996 15.625 13.0611 15.625 12.8125ZM16.5625 18.75H20.9375C21.1861 18.75 21.4246 18.8488 21.6004 19.0246C21.7762 19.2004 21.875 19.4389 21.875 19.6875C21.875 19.9361 21.7762 20.1746 21.6004 20.3504C21.4246 20.5262 21.1861 20.625 20.9375 20.625H16.5625C16.3139 20.625 16.0754 20.5262 15.8996 20.3504C15.7238 20.1746 15.625 19.9361 15.625 19.6875C15.625 19.4389 15.7238 19.2004 15.8996 19.0246C16.0754 18.8488 16.3139 18.75 16.5625 18.75ZM13.475 12.225L10.975 14.725C10.7992 14.9006 10.5609 14.9992 10.3125 14.9992C10.0641 14.9992 9.82578 14.9006 9.65 14.725L8.4 13.475C8.30789 13.3892 8.23401 13.2857 8.18277 13.1707C8.13153 13.0557 8.10398 12.9315 8.10176 12.8057C8.09954 12.6798 8.1227 12.5547 8.16985 12.438C8.217 12.3213 8.28718 12.2152 8.3762 12.1262C8.46523 12.0372 8.57127 11.967 8.688 11.9198C8.80474 11.8727 8.92977 11.8495 9.05565 11.8518C9.18153 11.854 9.30567 11.8815 9.42067 11.9328C9.53567 11.984 9.63917 12.0579 9.725 12.15L10.3125 12.7375L12.15 10.9C12.2358 10.8079 12.3393 10.734 12.4543 10.6828C12.5693 10.6315 12.6935 10.604 12.8193 10.6018C12.9452 10.5995 13.0703 10.6227 13.187 10.6698C13.3037 10.717 13.4098 10.7872 13.4988 10.8762C13.5878 10.9652 13.658 11.0713 13.7052 11.188C13.7523 11.3047 13.7755 11.4298 13.7732 11.5557C13.771 11.6815 13.7435 11.8057 13.6922 11.9207C13.641 12.0357 13.5671 12.1392 13.475 12.225ZM13.475 17.775C13.6506 17.9508 13.7492 18.1891 13.7492 18.4375C13.7492 18.6859 13.6506 18.9242 13.475 19.1L10.975 21.6C10.7992 21.7756 10.5609 21.8742 10.3125 21.8742C10.0641 21.8742 9.82578 21.7756 9.65 21.6L8.4 20.35C8.30789 20.2642 8.23401 20.1607 8.18277 20.0457C8.13153 19.9307 8.10398 19.8065 8.10176 19.6807C8.09954 19.5548 8.1227 19.4297 8.16985 19.313C8.217 19.1963 8.28718 19.0902 8.3762 19.0012C8.46523 18.9122 8.57127 18.842 8.688 18.7948C8.80474 18.7477 8.92977 18.7245 9.05565 18.7268C9.18153 18.729 9.30567 18.7565 9.42067 18.8078C9.53567 18.859 9.63917 18.9329 9.725 19.025L10.3125 19.6125L12.15 17.775C12.3258 17.5994 12.5641 17.5008 12.8125 17.5008C13.0609 17.5008 13.2992 17.5994 13.475 17.775Z" fill="white" />
                        </svg>
                        <span>
                            Activity
                        </span>
                    </div>
                </button>
                <button className="" onClick={(e) => {
                    if (isLoggedIn) {
                        createSpace();
                        console.log("CREATING SPACE")
                    }
                    else {
                        alert("Please login/signup to create space")
                    }
                }}>
                    <div className={`flex gap-4 items-center text-white font-extralight ${activeComponent == 2 ? "bg-primary" : ''} hover:bg-primary w-fit py-6 pl-9 pr-12  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 27.5C8.09625 27.5 2.5 21.9037 2.5 15C2.5 8.09625 8.09625 2.5 15 2.5C21.9037 2.5 27.5 8.09625 27.5 15C27.5 21.9037 21.9037 27.5 15 27.5ZM19.3075 12.46C18.8766 11.7314 18.2686 11.1234 17.54 10.6925L10.6925 17.54C11.1234 18.2686 11.7314 18.8766 12.46 19.3075L19.3075 12.46Z" fill="white" />
                        </svg>
                        <span>
                            New Space
                        </span>
                    </div>
                </button>
                <button className="" onClick={(e) => {
                    if (isLoggedIn) {
                        setShowJoinSpace(true)
                    }
                    else {
                        alert("Please login/signup to join space")
                    }
                }}>
                    <div className={`flex gap-4 items-center text-white font-extralight ${activeComponent == 5 ? "bg-primary" : ""} hover:bg-primary w-fit py-6 pl-10 pr-10  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 12.5C20 13.8261 19.4732 15.0979 18.5355 16.0355C17.5979 16.9732 16.3261 17.5 15 17.5C13.6739 17.5 12.4021 16.9732 11.4645 16.0355C10.5268 15.0979 10 13.8261 10 12.5C10 11.1739 10.5268 9.90215 11.4645 8.96447C12.4021 8.02678 13.6739 7.5 15 7.5C16.3261 7.5 17.5979 8.02678 18.5355 8.96447C19.4732 9.90215 20 11.1739 20 12.5Z" fill="white" />
                            <path fillRule="evenodd" clipRule="evenodd" d="M14.49 27.49C7.82312 27.2225 2.5 21.7325 2.5 15C2.5 8.09625 8.09625 2.5 15 2.5C21.9037 2.5 27.5 8.09625 27.5 15C27.5 21.9037 21.9037 27.5 15 27.5C14.9429 27.5004 14.8858 27.5004 14.8287 27.5C14.7156 27.5 14.6025 27.4963 14.49 27.49ZM6.97875 22.8875C6.88529 22.6191 6.85348 22.3331 6.88568 22.0507C6.91787 21.7684 7.01325 21.4969 7.16474 21.2564C7.31622 21.016 7.51991 20.8127 7.7607 20.6617C8.00149 20.5108 8.27319 20.416 8.55562 20.3844C13.4281 19.845 16.6019 19.8937 21.4506 20.3956C21.7334 20.4251 22.0058 20.5187 22.247 20.6693C22.4882 20.8199 22.6918 21.0236 22.8423 21.2648C22.9929 21.506 23.0864 21.7784 23.1158 22.0612C23.1452 22.3441 23.1096 22.6299 23.0119 22.8969C25.09 20.7943 26.2537 17.9562 26.25 15C26.25 8.78687 21.2131 3.75 15 3.75C8.78687 3.75 3.75 8.78687 3.75 15C3.75 18.0725 4.98188 20.8575 6.97875 22.8875Z" fill="white" />
                        </svg>
                        <span>
                            Join Space
                        </span>
                    </div>
                </button>
                <button className="" onClick={(e) => {
                    if (isLoggedIn) {
                        setActiveComponent(3)
                    }
                    else {
                        alert("Please login/signup to like songs")
                    }
                }}>
                    <div className={`flex gap-4 items-center text-white font-extralight ${activeComponent == 3 ? "bg-primary" : ""} hover:bg-primary w-fit py-6 pl-10 pr-6  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_2_273)">
                                <path d="M24 25.5C24 26.6935 23.5259 27.8381 22.682 28.682C21.8381 29.5259 20.6935 30 19.5 30H16.5C15.3065 30 14.1619 29.5259 13.318 28.682C12.4741 27.8381 12 26.6935 12 25.5C12 24.3065 12.4741 23.1619 13.318 22.318C14.1619 21.4741 15.3065 21 16.5 21H19.5C20.0108 20.9992 20.5181 21.0855 21 21.255V1.5L30 0V6L24 7.005V25.5ZM0 4.5H18V7.5H0V4.5ZM0 10.5H18V13.5H0V10.5ZM0 16.5H18V19.5H0V16.5ZM0 22.5H9V25.5H0V22.5Z" fill="white" />
                            </g>
                            <defs>
                                <clipPath id="clip0_2_273">
                                    <rect width="30" height="30" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        <span>
                            Liked songs
                        </span>
                    </div>
                </button>
                <button className="" onClick={(e) => {
                    if (isLoggedIn) {
                        setActiveComponent(4);
                    }
                    else {
                        alert("Please login/signup to create playlists")
                    }
                }}>
                    <div className={`flex gap-4 items-center text-white font-extralight ${activeComponent == 4 ? "bg-primary" : ""} hover:bg-primary w-fit py-6 pl-10 pr-6  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_2_275)">
                                <path d="M15 30C11.0218 30 7.20644 28.4196 4.3934 25.6066C1.58035 22.7936 0 18.9782 0 15C0 11.0218 1.58035 7.20644 4.3934 4.3934C7.20644 1.58035 11.0218 0 15 0C18.9782 0 22.7936 1.58035 25.6066 4.3934C28.4196 7.20644 30 11.0218 30 15C30 18.9782 28.4196 22.7936 25.6066 25.6066C22.7936 28.4196 18.9782 30 15 30ZM19.3687 8.4375C17.0812 8.4375 15.9375 9.375 15.0131 10.5675C14.0869 9.375 12.9431 8.4375 10.6538 8.4375C8.72625 8.4375 6.58687 9.9075 6.58687 13.125C6.58687 15.9356 9.38625 19.5619 12.6731 21.5944C13.6481 22.1963 14.3419 22.4925 15.0131 22.5019C15.6825 22.4925 16.3781 22.1963 17.3512 21.5944C20.6381 19.5619 23.4375 15.9375 23.4375 13.125C23.4375 9.9075 21.3 8.4375 19.3687 8.4375Z" fill="white" />
                            </g>
                            <defs>
                                <clipPath id="clip0_2_275">
                                    <rect width="30" height="30" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        <span>
                            My playlists
                        </span>
                    </div>
                </button>

                <button className="" onClick={(e) => setActiveComponent(6)}>
                    <div className={`flex gap-4 items-center w-fit text-white font-extralight ${activeComponent == 6 ? "bg-primary" : ""} hover:bg-primary py-6 pl-10 pr-11  rounded-r-[50px]`}>
                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_2_281)">
                                <g mask="url(#mask0_2_281)">
                                    <path d="M15 18.125C15.8288 18.125 16.6237 17.7958 17.2097 17.2097C17.7958 16.6237 18.125 15.8288 18.125 15C18.125 14.1712 17.7958 13.3763 17.2097 12.7903C16.6237 12.2042 15.8288 11.875 15 11.875C14.1712 11.875 13.3763 12.2042 12.7903 12.7903C12.2042 13.3763 11.875 14.1712 11.875 15C11.875 15.8288 12.2042 16.6237 12.7903 17.2097C13.3763 17.7958 14.1712 18.125 15 18.125Z" fill="white" />
                                    <path fillRule="evenodd" clipRule="evenodd" d="M15 21.25C18.4519 21.25 21.25 18.4519 21.25 15C21.25 11.5481 18.4519 8.75 15 8.75C11.5481 8.75 8.75 11.5481 8.75 15C8.75 18.4519 11.5481 21.25 15 21.25ZM15 20C16.3261 20 17.5979 19.4732 18.5355 18.5355C19.4732 17.5979 20 16.3261 20 15C20 13.6739 19.4732 12.4021 18.5355 11.4645C17.5979 10.5268 16.3261 10 15 10C13.6739 10 12.4021 10.5268 11.4645 11.4645C10.5268 12.4021 10 13.6739 10 15C10 16.3261 10.5268 17.5979 11.4645 18.5355C12.4021 19.4732 13.6739 20 15 20Z" fill="white" />
                                    <path fillRule="evenodd" clipRule="evenodd" d="M30 0H0V30H30V0ZM12.5 3.75V4.50125C12.0837 8.645 10.6906 9.22625 6.64688 7.29063L6.5075 7.20937L4.0075 11.5406L4.59 11.8769C7.9275 14.2456 7.92812 15.7225 4.65438 18.0863L4.0075 18.46L6.5075 22.79L6.77875 22.6338C10.7381 20.7463 12.0813 21.38 12.5 25.5212V26.25H17.5V26.06L17.5169 26.2656C17.8344 21.5925 19.0444 20.6988 23.0169 22.5156L23.4925 22.7906L25.98 18.4819L25.9925 18.46L25.7075 18.295C22.0206 15.7487 22.0588 14.2431 25.7488 11.6806L25.9925 11.54L23.4925 7.21L23.0612 7.45938C19.1637 9.27688 17.8862 8.5 17.5 4.20875V3.75H12.5Z" fill="white" />
                                </g>
                            </g>
                            <defs>
                                <clipPath id="clip0_2_281">
                                    <rect width="30" height="30" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        <span>
                            Settings
                        </span>
                    </div>
                </button>
            </div>
            {
                isLoggedIn ?
                    <div >
                        <button className="flex  px-12 gap-4 text-lg items-center text-[#D4BABA] font-extralight"
                            onClick={(e) => {
                                handleClick(e);
                            }}>
                            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22.3813 18.8954H20.3795C20.2429 18.8954 20.1147 18.9564 20.0293 19.064C19.83 19.3111 19.6164 19.5494 19.3915 19.7762C18.4715 20.7164 17.3817 21.4657 16.1824 21.9826C14.94 22.5183 13.6046 22.7932 12.2559 22.7907C10.892 22.7907 9.57077 22.5174 8.3293 21.9826C7.13005 21.4657 6.04029 20.7164 5.12027 19.7762C4.19861 18.8391 3.4637 17.7285 2.95624 16.5058C2.42947 15.2384 2.16466 13.8925 2.16466 12.5C2.16466 11.1076 2.43232 9.76166 2.95624 8.49422C3.46308 7.27038 4.19202 6.16864 5.12027 5.22387C6.04853 4.27911 7.12769 3.53492 8.3293 3.01748C9.57077 2.4826 10.892 2.20934 12.2559 2.20934C13.6198 2.20934 14.941 2.47969 16.1824 3.01748C17.3841 3.53492 18.4632 4.27911 19.3915 5.22387C19.6164 5.45352 19.8271 5.69189 20.0293 5.93608C20.1147 6.04364 20.2457 6.10468 20.3795 6.10468H22.3813C22.5606 6.10468 22.6717 5.9012 22.572 5.74713C20.3881 2.28202 16.5668 -0.0115839 12.2246 4.40077e-05C5.40216 0.0174858 -0.0677044 5.67155 0.000633418 12.6279C0.0689712 19.4738 5.5303 25 12.2559 25C16.5868 25 20.3909 22.7093 22.572 19.2529C22.6688 19.0988 22.5606 18.8954 22.3813 18.8954ZM24.9126 12.3169L20.8721 9.06108C20.7212 8.93898 20.502 9.04945 20.502 9.24421V11.4535H11.5611C11.4358 11.4535 11.3333 11.5582 11.3333 11.6861V13.314C11.3333 13.4419 11.4358 13.5465 11.5611 13.5465H20.502V15.7558C20.502 15.9506 20.7241 16.0611 20.8721 15.939L24.9126 12.6832C24.9398 12.6614 24.9618 12.6336 24.977 12.6019C24.9921 12.5702 25 12.5353 25 12.5C25 12.4647 24.9921 12.4299 24.977 12.3982C24.9618 12.3664 24.9398 12.3386 24.9126 12.3169Z" fill="#D4BABA" />
                            </svg>
                            <span>
                                Log out
                            </span>
                        </button>
                    </div>
                    : null
            }
        </main>
    )
}